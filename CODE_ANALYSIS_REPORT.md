# –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ bot.py - –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

## üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ `handle_admin_broadcast`**
- **–°—Ç—Ä–æ–∫–∏:** ~1476 –∏ ~3046
- **–ü—Ä–æ–±–ª–µ–º–∞:** –§—É–Ω–∫—Ü–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –¥–≤–∞–∂–¥—ã —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–º
- **–†–µ—à–µ–Ω–∏–µ:** –£–¥–∞–ª–∏—Ç—å –æ–¥–Ω—É –∏–∑ –≤–µ—Ä—Å–∏–π

### 2. **–ù–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `handle_worker_balance`**
- **–°—Ç—Ä–æ–∫–∞:** 2884
- **–ü—Ä–æ–±–ª–µ–º–∞:** –§—É–Ω–∫—Ü–∏—è –æ–±—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ `callback.from_user.` –±–µ–∑ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
- **–†–µ—à–µ–Ω–∏–µ:** –ó–∞–≤–µ—Ä—à–∏—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é —Ñ—É–Ω–∫—Ü–∏–∏

### 3. **–¢–æ–∫–µ–Ω –±–æ—Ç–∞ –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ**
- **–°—Ç—Ä–æ–∫–∞:** 17
- **–ü—Ä–æ–±–ª–µ–º–∞:** `BOT_TOKEN = "8269461372:AAFt2r92GoVh7tG9uHcsSyh2rG_rH5UJcP8"`
- **–†–µ—à–µ–Ω–∏–µ:** –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env —Ñ–∞–π–ª)

## ‚ö†Ô∏è –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–π—Å—è –∫–æ–¥

### 4. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –ø–æ–∫–∞–∑–∞ —Å–ø–∏—Å–∫–æ–≤ –∞–∫—Ç–∏–≤–æ–≤**
- **–§—É–Ω–∫—Ü–∏–∏:** `show_crypto_list`, `show_stocks_list`, `show_commodities_list` (—Å—Ç—Ä–æ–∫–∏ 2184-2217)
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ—á—Ç–∏ –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–π –∫–æ–¥, –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç –∏ —Å–ø–∏—Å–æ–∫
- **–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å –æ–¥–Ω—É —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é

### 5. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–ø–∏—Å–∫–æ–≤ –∞–∫—Ç–∏–≤–æ–≤**
- **–§—É–Ω–∫—Ü–∏–∏:** `edit_to_crypto_list`, `edit_to_stocks_list`, `edit_to_commodities_list` (—Å—Ç—Ä–æ–∫–∏ 2088-2159)
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–≤—Ç–æ—Ä—è—é—â–∞—è—Å—è –ª–æ–≥–∏–∫–∞ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –æ—Ç–ª–∏—á–∏—è–º–∏
- **–†–µ—à–µ–Ω–∏–µ:** –û–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤ –æ–¥–Ω—É —Ñ—É–Ω–∫—Ü–∏—é —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

### 6. **–ü–æ–≤—Ç–æ—Ä—è—é—â–∞—è—Å—è –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–æ—Ä–∫–µ—Ä–∞ –∏ –∞–¥–º–∏–Ω–∞**
- **–§—É–Ω–∫—Ü–∏–∏:** 
  - `handle_admin_user_profile` (—Å—Ç—Ä–æ–∫–∞ 2577)
  - `handle_worker_user_profile` (—Å—Ç—Ä–æ–∫–∞ 2750)
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ—á—Ç–∏ –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–π –∫–æ–¥ –¥–ª—è –ø–æ–∫–∞–∑–∞ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å –æ–±—â—É—é —Ñ—É–Ω–∫—Ü–∏—é —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø—Ä–∞–≤

### 7. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Ä–µ–∂–∏–º–∞ —Ç–æ—Ä–≥–æ–≤–ª–∏**
- **–§—É–Ω–∫—Ü–∏–∏:**
  - `handle_admin_trademode` (—Å—Ç—Ä–æ–∫–∞ 2656)
  - `handle_worker_trademode` (—Å—Ç—Ä–æ–∫–∞ 2800)
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ò–¥–µ–Ω—Ç–∏—á–Ω–∞—è –ª–æ–≥–∏–∫–∞
- **–†–µ—à–µ–Ω–∏–µ:** –û–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤ –æ–¥–Ω—É —Ñ—É–Ω–∫—Ü–∏—é

### 8. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞**
- **–§—É–Ω–∫—Ü–∏–∏:**
  - `handle_admin_coef` (—Å—Ç—Ä–æ–∫–∞ 2691)
  - `handle_worker_coefficient` (—Å—Ç—Ä–æ–∫–∞ 2862)
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ò–¥–µ–Ω—Ç–∏—á–Ω–∞—è –ª–æ–≥–∏–∫–∞
- **–†–µ—à–µ–Ω–∏–µ:** –û–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤ –æ–¥–Ω—É —Ñ—É–Ω–∫—Ü–∏—é

## üü° –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ/–ú–µ—Ä—Ç–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 9. **–ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è —Ñ—É–Ω–∫—Ü–∏—è `handle_worker_requisites`**
- **–°—Ç—Ä–æ–∫–∞:** 2945
- **–ü—Ä–æ–±–ª–µ–º–∞:** –§—É–Ω–∫—Ü–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞, –Ω–æ callback `worker_requisites` –Ω–∏–≥–¥–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- **–†–µ—à–µ–Ω–∏–µ:** –£–¥–∞–ª–∏—Ç—å –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –≤ –º–µ–Ω—é –≤–æ—Ä–∫–µ—Ä–∞

### 10. **–ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `WORKER_PASSWORD`**
- **–°—Ç—Ä–æ–∫–∞:** 120
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ü–∞—Ä–æ–ª—å –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω, –Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑
- **–†–µ—à–µ–Ω–∏–µ:** –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–ª–∏ .env

## üîµ –ü—Ä–æ–±–ª–µ–º—ã —Å –ª–æ–≥–∏–∫–æ–π

### 11. **–ù–µ–ø–æ–ª–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π**
- **–°—Ç—Ä–æ–∫–∞:** 1473 (—Ñ—É–Ω–∫—Ü–∏—è `handle_worker_text_input`)
- **–ü—Ä–æ–±–ª–µ–º–∞:** –§—É–Ω–∫—Ü–∏—è –æ–±—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Å—Ç—Ä–æ–∫–µ `await mess` –±–µ–∑ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
- **–†–µ—à–µ–Ω–∏–µ:** –ó–∞–≤–µ—Ä—à–∏—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é

### 12. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ú–Ω–æ–≥–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **–ü—Ä–∏–º–µ—Ä—ã:**
  - –í–≤–æ–¥ —Å—É–º–º—ã –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è (–º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º)
  - –í–≤–æ–¥ –Ω–æ–º–µ—Ä–∞ –∫–∞—Ä—Ç—ã (–Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è)
- **–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é

### 13. **–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –≥–æ–Ω–∫–∞ –¥–∞–Ω–Ω—ã—Ö**
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–ª–æ–≤–∞—Ä–∏ (`users_data`, `trading_states`, `worker_states`) –∏–∑–º–µ–Ω—è—é—Ç—Å—è –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
- **–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å asyncio.Lock –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–µ–∫—Ü–∏–π

## üü¢ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

### 14. **–£–ª—É—á—à–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–æ–¥–∞**
- –†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –º–æ–¥—É–ª–∏:
  - `handlers/user.py` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - `handlers/admin.py` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∞–¥–º–∏–Ω–æ–≤
  - `handlers/worker.py` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤–æ—Ä–∫–µ—Ä–æ–≤
  - `handlers/trading.py` - —Ç–æ—Ä–≥–æ–≤–∞—è –ª–æ–≥–∏–∫–∞
  - `utils/data.py` - —Ä–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏
  - `utils/validators.py` - –≤–∞–ª–∏–¥–∞—Ü–∏—è

### 15. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö**
- –ó–∞–º–µ–Ω–∏—Ç—å JSON —Ñ–∞–π–ª—ã –Ω–∞ SQLite/PostgreSQL
- –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
  - –ê—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π
  - –õ—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
  - –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

### 16. **–î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫**
- –ú–Ω–æ–≥–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è
- –î–æ–±–∞–≤–∏—Ç—å try-except –±–ª–æ–∫–∏ –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö

### 17. **–£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
- –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã—Ö –ª–æ–≥–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤ —Ñ–∞–π–ª —Å —Ä–æ—Ç–∞—Ü–∏–µ–π

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–í—Å–µ–≥–æ —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞:** ~3520
- **–ù–∞–π–¥–µ–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–π:** 8
- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º:** 3
- **–ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π:** 2
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π:** 4

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

1. **–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:**
   - –ò—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (#2, #11)
   - –£–±—Ä–∞—Ç—å —Ç–æ–∫–µ–Ω –∏–∑ –∫–æ–¥–∞ (#3)
   - –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ `handle_admin_broadcast` (#1)

2. **–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:**
   - –û–±—ä–µ–¥–∏–Ω–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è —Ñ—É–Ω–∫—Ü–∏–∏ (#4-8)
   - –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö (#12)

3. **–ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:**
   - –£–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (#9)
   - –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (#14)
   - –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ –ë–î (#15)
